<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="BookDAO">
 
 	<resultMap type="bookDTO" id="books">
 		<id property="b_id" column="B_ID"/>
 		<result property="title" column="title" />
 		<result property="author" column="author" />
 		<result property="pubdate" column="pubdate" />
 		<result property="description" column="description" />
 		<result property="isbn" column="isbn" />
 		<result property="cover" column="cover" />
 		<result property="publisher" column="publisher" />
 	</resultMap>
 
 	<!-- 도서 검색 -->
 	<select id="searchBooks" resultMap="books">
 		SELECT * FROM C_BOOK WHERE 1=1
 		<if test="bkeyword != null and bkeyword != ''">
 			AND (
 			title LIKE CONCAT('%', #{bkeyword}, '%') 
 			OR author LIKE CONCAT('%', #{bkeyword}, '%')
 			OR isbn LIKE CONCAT('%', #{bkeyword}, '%')
 			OR publisher LIKE CONCAT('%', #{bkeyword}, '%')
			)
 		</if>
 	</select>
 
 </mapper>